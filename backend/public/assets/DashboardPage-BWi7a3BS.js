import{u as x,_ as w,L as k}from"./LoadingSpinner-C2ZbxMNq.js";import{d as f,c as _,a as r,b as e,e as y,t as d,o as a,f as v,u as l,F as L,r as C,n as S,g as b,h as D,w as V,i as u}from"./index-D3YILK1Z.js";import{C as P,a as T,L as A,P as N,b as z,p as B,c as E,d as F,i as I,e as j}from"./index-Szo5Bekg.js";const M={class:"card"},Z={class:"flex items-start justify-between"},K={class:"text-sm font-medium text-gray-500"},R={class:"mt-2 text-3xl font-bold text-gray-900"},U={key:0,class:"mt-1 text-xs text-gray-400"},G={class:"text-3xl"},h=f({__name:"StatCard",props:{title:{},value:{},icon:{},trend:{}},setup(o){const t=o,s=_(()=>new Intl.NumberFormat("de-DE").format(t.value)),c=_(()=>{switch(t.trend){case"7d":return"letzte 7 Tage";case"30d":return"letzte 30 Tage";case"90d":return"letzte 90 Tage";case"year":return"letztes Jahr";case"live":return"live";case"all":return"seit Beginn";default:return""}});return(n,g)=>(a(),r("div",M,[e("div",Z,[e("div",null,[e("p",K,d(o.title),1),e("p",R,d(s.value),1),c.value?(a(),r("p",U,d(c.value),1)):y("",!0)]),e("span",G,d(o.icon),1)])]))}}),J={class:"h-64"},O={key:1,class:"flex items-center justify-center h-full text-gray-400"},W=f({__name:"ViewsChart",setup(o){P.register(T,A,N,z,B,E,F,I);const t=x(),s={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",titleColor:"#fff",bodyColor:"#fff",padding:12,cornerRadius:8}},scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:10}},y:{beginAtZero:!0,grid:{color:"#f3f4f6"},ticks:{precision:0}}},interaction:{intersect:!1,mode:"index"}},c=_(()=>t.chartData!==null);return(n,g)=>(a(),r("div",J,[c.value?(a(),v(l(j),{key:0,data:l(t).chartData,options:s},null,8,["data"])):(a(),r("div",O," Keine Daten verfÃ¼gbar "))]))}}),q={class:"space-y-3"},H={key:0,class:"text-center text-gray-400 py-8"},Q={class:"flex items-center justify-between mb-1"},X=["title"],Y={class:"text-sm font-medium text-gray-900"},ee={class:"h-2 bg-gray-100 rounded-full overflow-hidden"},te=f({__name:"TopPages",setup(o){const t=x(),s=_(()=>t.pageStats.slice(0,10)),c=_(()=>s.value.length?Math.max(...s.value.map(i=>i.views)):1);function n(i){return new Intl.NumberFormat("de-DE").format(i)}function g(i){if(i==="/")return"Startseite";const p=i.replace(/^\/|\/$/g,"").replace(/-|_/g," ");return p.charAt(0).toUpperCase()+p.slice(1)}function $(i){return`${i/c.value*100}%`}return(i,p)=>(a(),r("div",q,[s.value.length?y("",!0):(a(),r("div",H," Keine Daten verfÃ¼gbar ")),(a(!0),r(L,null,C(s.value,m=>(a(),r("div",{key:m.path,class:"group"},[e("div",Q,[e("span",{class:"text-sm text-gray-700 truncate",title:m.path},d(g(m.path)),9,X),e("span",Y,d(n(m.views)),1)]),e("div",ee,[e("div",{class:"h-full bg-primary-500 rounded-full transition-all duration-500",style:S({width:$(m.views)})},null,4)])]))),128))]))}}),se={class:"bg-red-50 border border-red-200 rounded-lg p-4"},ae={class:"flex items-center gap-3"},re={class:"text-sm text-red-600"},ne=f({__name:"ErrorMessage",props:{message:{}},setup(o){return(t,s)=>(a(),r("div",se,[e("div",ae,[s[1]||(s[1]=e("span",{class:"text-red-500 text-xl"},"âš ï¸",-1)),e("div",null,[s[0]||(s[0]=e("h4",{class:"font-medium text-red-800"},"Fehler",-1)),e("p",re,d(o.message),1)])])]))}}),le={class:"space-y-6"},ie={class:"flex items-center justify-between"},oe={key:2,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ce={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},de={class:"card"},ue={class:"card"},ge=f({__name:"DashboardPage",setup(o){const t=x();b(()=>{t.fetchAll()});let s;return b(()=>{s=setInterval(()=>{t.fetchLive()},6e4)}),D(()=>{s&&clearInterval(s)}),V(()=>t.selectedPeriod,()=>{}),(c,n)=>(a(),r("div",le,[e("div",ie,[n[0]||(n[0]=e("h2",{class:"text-2xl font-bold text-gray-900"},"Ãœbersicht",-1)),u(w)]),l(t).error?(a(),v(ne,{key:0,message:l(t).error},null,8,["message"])):y("",!0),l(t).isLoading&&!l(t).overview?(a(),v(k,{key:1})):(a(),r("div",oe,[u(h,{title:"Aufrufe (Zeitraum)",value:l(t).totalViews,icon:"ðŸ“ˆ",trend:l(t).selectedPeriod},null,8,["value","trend"]),u(h,{title:"Letzte 24 Stunden",value:l(t).last24hViews,icon:"âš¡",trend:"live"},null,8,["value"]),u(h,{title:"Gesamt (alle Zeit)",value:l(t).allTimeViews,icon:"ðŸ“Š",trend:"all"},null,8,["value"])])),e("div",ce,[e("div",de,[n[1]||(n[1]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"TÃ¤gliche Aufrufe",-1)),u(W)]),e("div",ue,[n[2]||(n[2]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Top Seiten",-1)),u(te)])])]))}});export{ge as default};
